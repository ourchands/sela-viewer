name: بناء Sela Viewer

on:
  push:
    branches: [main, master]
  workflow_dispatch:

jobs:
  build-linux:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Code
        uses: actions/checkout@v3
        with:
          submodules: recursive

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Install Dependencies and Arabic Support
        run: |
          sudo apt-get update
          sudo apt-get install -y cmake g++ libfribidi-dev libharfbuzz-dev libgl1-mesa-dev libglu1-mesa-dev

      - name: Install Autobuild
        run: |
          python3 -m pip install autobuild

      - name: Run Build
        run: |
          if [ -d "firestorm" ]; then
            cd firestorm
          fi
          # استخدام المنصة linux64 المتوافقة مع أنظمة أوبونتو
          autobuild build -p linux64
